---
- scm:
    name: git-integration
    scm:
      - git:
          url: 'http://gerrit.onap.org/r/integration'
          branches:
            - 'origin/{branch}'
          wipe-workspace: false
          skip-tag: true
          timeout: 30

- scm:
    name: gerrit-trigger-scm
    scm:
      - git:
          url: 'http://gerrit.onap.org/r/integration'
          refspec: '$GERRIT_REFSPEC'
          branches:
            - 'origin/$GERRIT_BRANCH'
          choosing-strategy: 'gerrit'

- publisher:
    name: integration-robot
    publishers:
      - robot:
          output-path: 'archives'
          other-files: ''
          unstable-threshold: 75
          pass-threshold: 100
          only-critical: false

- trigger:
    name: gerrit-trigger-patch-submitted
    triggers:
      - gerrit:
          server-name: 'gerrit.onap.org'
          trigger-on:
            - patchset-created-event:
                exclude-drafts: 'false'
                exclude-trivial-rebase: 'false'
                exclude-no-code-change: 'false'
            - draft-published-event
            - comment-added-contains-event:
                comment-contains-value: 'recheck'
          projects:
            - project-compare-type: 'ANT'
              project-pattern: '{project}'
              branches:
                - branch-compare-type: 'ANT'
                  branch-pattern: '**/{branch}'
              file-paths:
                - compare-type: 'ANT'
                  pattern: '{files}'
